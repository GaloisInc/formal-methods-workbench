/* This file has been autogenerated by Ivory
 * Compiler version  0.1.0.0
 */
#include "tower_signal_usercode_uartISR_321.h"

void nodeInit_uartISR_321()
{
    uint32_t n_r0 = ivory_hw_io_read_u32(1073887300U);
    
    ivory_hw_io_write_u32(1073887300U, n_r0 | 1U << 4U);
    
    uint32_t n_r1 = ivory_hw_io_read_u32(1073887280U);
    
    ivory_hw_io_write_u32(1073887280U, n_r1 | 1U << 1U);
    
    uint32_t n_r2 = ivory_hw_io_read_u32(1073873928U);
    
    ivory_hw_io_write_u32(1073873928U, n_r2 & ~(3U << 12U) | (uint32_t) (2U <<
                                                                         0U) <<
                          12U);
    
    uint32_t n_r3 = ivory_hw_io_read_u32(1073873924U);
    
    ivory_hw_io_write_u32(1073873924U, n_r3 & ~(1U << 6U) | 0U << 6U);
    
    uint32_t n_r4 = ivory_hw_io_read_u32(1073873932U);
    
    ivory_hw_io_write_u32(1073873932U, n_r4 & ~(3U << 12U) | (uint32_t) (1U <<
                                                                         0U) <<
                          12U);
    
    uint32_t n_r5 = ivory_hw_io_read_u32(1073873952U);
    
    ivory_hw_io_write_u32(1073873952U, n_r5 & ~(15U << 24U) | (uint32_t) (7U <<
                                                                          0U) <<
                          24U);
    
    uint32_t n_r6 = ivory_hw_io_read_u32(1073873920U);
    
    ivory_hw_io_write_u32(1073873920U, n_r6 & ~(3U << 12U) | (uint32_t) (2U <<
                                                                         0U) <<
                          12U);
    
    uint32_t n_r7 = ivory_hw_io_read_u32(1073887280U);
    
    ivory_hw_io_write_u32(1073887280U, n_r7 | 1U << 1U);
    
    uint32_t n_r8 = ivory_hw_io_read_u32(1073873928U);
    
    ivory_hw_io_write_u32(1073873928U, n_r8 & ~(3U << 14U) | (uint32_t) (2U <<
                                                                         0U) <<
                          14U);
    
    uint32_t n_r9 = ivory_hw_io_read_u32(1073873924U);
    
    ivory_hw_io_write_u32(1073873924U, n_r9 & ~(1U << 7U) | 0U << 7U);
    
    uint32_t n_r10 = ivory_hw_io_read_u32(1073873932U);
    
    ivory_hw_io_write_u32(1073873932U, n_r10 & ~(3U << 14U) | (uint32_t) (1U <<
                                                                          0U) <<
                          14U);
    
    uint32_t n_r11 = ivory_hw_io_read_u32(1073873952U);
    
    ivory_hw_io_write_u32(1073873952U, n_r11 & ~(15U << 28U) | (uint32_t) (7U <<
                                                                           0U) <<
                          28U);
    
    uint32_t n_r12 = ivory_hw_io_read_u32(1073873920U);
    
    ivory_hw_io_write_u32(1073873920U, n_r12 & ~(3U << 14U) | (uint32_t) (2U <<
                                                                          0U) <<
                          14U);
    
    uint32_t n_r13 = ivory_hw_io_read_u32(1073887240U);
    uint32_t n_local14 = 0U;
    uint32_t* n_ref15 = &n_local14;
    
    if ((uint8_t) ((uint16_t) (n_r13 >> 2U & 3U & 65535U) & 255U) == (0U | 2U <<
                                                                      0U)) {
        uint32_t n_r16 = ivory_hw_io_read_u32(1073887236U);
        
        ASSERTS(((uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) & 255U) ==
                 3U << 0U ? 8U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U &
                                                        65535U) & 255U) == 2U <<
                 0U ? 6U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) &
                                      255U) == 1U <<
                 0U ? 4U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) &
                                      255U) == 0U ? 2U : 1U) != 0U);
        ASSERTS(((uint8_t) ((uint16_t) (n_r16 >> 22U & 1U & 65535U) & 255U) >
                 0U ? 24000000U : 16000000U) /
            (uint32_t) (uint8_t) ((uint16_t) (n_r16 >> 0U & 63U & 65535U) &
                                  255U) == 0U || 4294967295U /
            (((uint8_t) ((uint16_t) (n_r16 >> 22U & 1U & 65535U) & 255U) >
              0U ? 24000000U : 16000000U) /
             (uint32_t) (uint8_t) ((uint16_t) (n_r16 >> 0U & 63U & 65535U) &
                                   255U)) >= (uint32_t) (uint16_t) (n_r16 >>
                                                                    6U & 511U &
                                                                    65535U));
        ASSERTS((uint32_t) (uint8_t) ((uint16_t) (n_r16 >> 0U & 63U & 65535U) &
                                      255U) != 0U);
        ASSERTS(((uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) & 255U) ==
                 3U << 0U ? 8U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U &
                                                        65535U) & 255U) == 2U <<
                 0U ? 6U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) &
                                      255U) == 1U <<
                 0U ? 4U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) &
                                      255U) == 0U ? 2U : 1U) != 0U);
        ASSERTS((uint32_t) (uint8_t) ((uint16_t) (n_r16 >> 0U & 63U & 65535U) &
                                      255U) != 0U);
        *n_ref15 = ((uint8_t) ((uint16_t) (n_r16 >> 22U & 1U & 65535U) & 255U) >
                    0U ? 24000000U : 16000000U) /
            (uint32_t) (uint8_t) ((uint16_t) (n_r16 >> 0U & 63U & 65535U) &
                                  255U) * (uint32_t) (uint16_t) (n_r16 >> 6U &
                                                                 511U &
                                                                 65535U) /
            ((uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) & 255U) == 3U <<
             0U ? 8U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) &
                                  255U) == 2U <<
             0U ? 6U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) &
                                  255U) == 1U <<
             0U ? 4U : (uint8_t) ((uint16_t) (n_r16 >> 16U & 3U & 65535U) &
                                  255U) == 0U ? 2U : 1U);
    } else {
        uint32_t n_local17 = 0U;
        uint32_t* n_ref18 = &n_local17;
        
        if ((uint8_t) ((uint16_t) (n_r13 >> 2U & 3U & 65535U) & 255U) == (0U |
                                                                          1U <<
                                                                          0U)) {
            *n_ref18 = 24000000U;
        } else {
            uint32_t n_local19 = 0U;
            uint32_t* n_ref20 = &n_local19;
            
            if ((uint8_t) ((uint16_t) (n_r13 >> 2U & 3U & 65535U) & 255U) ==
                0U) {
                *n_ref20 = 16000000U;
            } else {
                *n_ref20 = 16000000U;
            }
            
            uint32_t n_deref21 = *n_ref20;
            
            *n_ref18 = n_deref21;
        }
        
        uint32_t n_deref22 = *n_ref18;
        
        *n_ref15 = n_deref22;
    }
    
    uint32_t n_deref23 = *n_ref15;
    uint32_t n_r24 = ivory_hw_io_read_u32(1073887240U);
    uint32_t n_let25 = 7U << 0U == (uint8_t) ((uint16_t) (n_r24 >> 13U & 7U &
                                                          65535U) &
                                              255U) ? 16U : 6U << 0U ==
            (uint8_t) ((uint16_t) (n_r24 >> 13U & 7U & 65535U) &
                       255U) ? 8U : 5U << 0U == (uint8_t) ((uint16_t) (n_r24 >>
                                                                       13U &
                                                                       7U &
                                                                       65535U) &
                                                           255U) ? 4U : 4U <<
            0U == (uint8_t) ((uint16_t) (n_r24 >> 13U & 7U & 65535U) &
                             255U) ? 2U : 0U == (uint8_t) ((uint16_t) (n_r24 >>
                                                                       13U &
                                                                       7U &
                                                                       65535U) &
                                                           255U) ? 1U : 1U;
    
    ASSERTS(n_let25 != 0U);
    ASSERTS(n_let25 != 0U);
    
    uint32_t n_let26 = n_deref23 / n_let25;
    uint16_t n_r27 = ivory_hw_io_read_u16(1073811468U);
    bool n_let28 = (uint8_t) (n_r27 >> 15U & 1U & 255U) == 0U ? false : true;
    
    ASSERTS(57600U * (n_let28 ? 2U : 4U) != 0U);
    ASSERTS(171798691U >= n_let26);
    ASSERTS(74565U >= (n_let28 ? 2U : 4U));
    ASSERTS(57600U * (n_let28 ? 2U : 4U) != 0U);
    
    uint32_t n_let29 = 25U * n_let26 / (57600U * (n_let28 ? 2U : 4U));
    uint32_t n_let30 = n_let29 / 100U << 4U;
    
    ASSERTS(n_let29 >= 100U * (n_let30 >> 4U));
    ASSERTS(42949672U >= n_let30 >> 4U);
    
    uint32_t n_let31 = n_let29 - 100U * (n_let30 >> 4U);
    
    ASSERTS(!n_let28 || 4294967295U - n_let31 * 8U >= 50U);
    ASSERTS(!n_let28 || (n_let31 == 0U || 4294967295U / n_let31 >= 8U));
    ASSERTS(!!n_let28 || 4294967295U - n_let31 * 16U >= 50U);
    ASSERTS(!!n_let28 || (n_let31 == 0U || 4294967295U / n_let31 >= 16U));
    
    uint32_t n_let32 = n_let30 | (n_let28 ? (n_let31 * 8U + 50U) / 100U &
                                  7U : (n_let31 * 16U + 50U) / 100U & 15U);
    
    ivory_hw_io_write_u16(1073811464U, (uint16_t) (n_let32 & 65535U) << 0U);
    
    uint16_t n_r33 = ivory_hw_io_read_u16(1073811472U);
    
    ivory_hw_io_write_u16(1073811472U, n_r33 & ~(3U << 12U) | 0U << 12U);
    
    uint16_t n_r34 = ivory_hw_io_read_u16(1073811468U);
    
    ivory_hw_io_write_u16(1073811468U, n_r34 & ~(1U << 12U) | 0U << 12U);
    
    uint16_t n_r35 = ivory_hw_io_read_u16(1073811468U);
    
    ivory_hw_io_write_u16(1073811468U, n_r35 & ~(1U << 10U) | 0U << 10U);
    
    uint16_t n_r36 = ivory_hw_io_read_u16(1073811468U);
    
    ivory_hw_io_write_u16(1073811468U, n_r36 | 1U << 13U | 1U << 3U | 1U << 2U);
    ASSERTS(12U < 1U << 4U);
    ivory_hw_io_write_u8(3758154789U, 12U << 4U);
    ivory_hw_io_write_u32(3758153988U, 1U << 5U);
    
    uint16_t n_r37 = ivory_hw_io_read_u16(1073811468U);
    
    ivory_hw_io_write_u16(1073811468U, n_r37 & ~(1U << 5U) | (uint16_t) (1U &
                                                                         1U) <<
                          5U);
}

void USART1_IRQHandler()
{
    uint16_t n_r0 = ivory_hw_io_read_u16(1073811456U);
    
    if ((uint8_t) (n_r0 >> 5U & 1U & 255U) == 0U ? false : true) {
        uint16_t n_r1 = ivory_hw_io_read_u16(1073811460U);
        uint8_t n_local2 = (uint8_t) ((n_r1 & 65535U) >> 0U & 255U & 255U);
        uint8_t* n_ref3 = &n_local2;
        
        emitFromSig_uartISR_321_chan320_325(n_ref3);
    } else {
        if ((uint8_t) (n_r0 >> 7U & 1U & 255U) == 0U ? false : true) {
            uint8_t n_local4 = 0U;
            uint8_t* n_ref5 = &n_local4;
            bool n_r6 = receiveFromSig_uartISR_321_chan319_323(n_ref5);
            
            if (n_r6) {
                uint8_t n_deref7 = *n_ref5;
                
                ivory_hw_io_write_u16(1073811460U, (uint16_t) n_deref7 << 0U);
            } else {
                uint16_t n_r8 = ivory_hw_io_read_u16(1073811468U);
                
                ivory_hw_io_write_u16(1073811468U, n_r8 & ~(1U << 7U) | 0U <<
                                      7U);
            }
        }
    }
}