/* This file has been autogenerated by Ivory
 * Compiler version  0.1.0.0
 */
#include "stabilize_controlloops.h"

struct PIDState g_pid_roll_stabilize = {.pid_reset =1U};

struct PIDState g_pid_roll_rate = {.pid_reset =1U};

struct PIDState g_pid_pitch_stabilize = {.pid_reset =1U};

struct PIDState g_pid_pitch_rate = {.pid_reset =1U};

struct PIDState g_pid_yaw_rate = {.pid_reset =1U};

void stabilize_init()
{
    return;
}

float stabilize_from_angle(struct PIDState* n_var0, const
                           struct PIDConfig* n_var1, struct PIDState* n_var2,
                           const struct PIDConfig* n_var3, float n_var4,
                           float n_var5, float n_var6, float n_var7,
                           float n_var8)
{
    REQUIRES(n_var8 != 0.0f);
    
    float n_let0 = n_var4 * n_var5;
    float n_let1 = n_var6 * 57.29578f;
    float n_let2 = n_let0 - n_let1;
    float n_r3 = pid_update(n_var0, n_var1, n_let2, n_let1);
    float n_let4 = n_var7 * 57.29578f;
    float n_let5 = n_r3 - n_let4;
    float n_r6 = pid_update(n_var2, n_var3, n_let5, n_let4);
    float n_r7 = fconstrain(-n_var8, n_var8, n_r6);
    
    ASSERTS(n_var8 != 0.0f);
    return n_r7 / n_var8;
}

float stabilize_from_rate(struct PIDState* n_var0, const
                          struct PIDConfig* n_var1, float n_var2, float n_var3,
                          float n_var4, float n_var5)
{
    REQUIRES(n_var5 != 0.0f);
    
    float n_let0 = n_var2 * n_var3;
    float n_let1 = n_var4 * 57.29578f;
    float n_let2 = n_let0 - n_let1;
    float n_r3 = pid_update(n_var0, n_var1, n_let2, n_let1);
    float n_r4 = fconstrain(-n_var5, n_var5, n_r3);
    
    ASSERTS(n_var5 != 0.0f);
    return n_r4 / n_var5;
}