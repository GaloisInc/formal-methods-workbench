/* This file has been autogenerated by Ivory
 * Compiler version  0.1.0.0
 */
#include "hxstream_state_module.h"

uint8_t decodeSM(struct hxstream_state* n_var0, uint8_t n_var1)
{
    uint8_t n_deref0 = n_var0->fstate;
    uint8_t n_local1 = 0U;
    uint8_t* n_ref2 = &n_local1;
    
    if (n_var1 == 126U) {
        *&n_var0->offset = 0;
        *&n_var0->fstate = 2U;
        *&n_var0->tagSeen = false;
        *&n_var0->fstate = 1U;
    } else {
        if (n_deref0 == 1U) {
            *&n_var0->ftag = n_var1;
            *&n_var0->tagSeen = true;
            *&n_var0->fstate = 2U;
        } else {
            if (n_deref0 == 2U) {
                if (n_var1 == 124U) {
                    *&n_var0->fstate = 3U;
                } else {
                    int32_t n_deref3 = n_var0->offset;
                    
                    ASSERTS(n_deref3 > 0 && 2147483647 - n_deref3 >= 1 ||
                        n_deref3 <= 0);
                    *&n_var0->offset = n_deref3 + 1;
                    *n_ref2 = n_var1;
                }
            } else {
                if (n_deref0 == 3U) {
                    *&n_var0->fstate = 2U;
                    
                    int32_t n_deref4 = n_var0->offset;
                    
                    ASSERTS(n_deref4 > 0 && 2147483647 - n_deref4 >= 1 ||
                        n_deref4 <= 0);
                    *&n_var0->offset = n_deref4 + 1;
                    *n_ref2 = 32U ^ n_var1;
                }
            }
        }
    }
    
    uint8_t n_deref5 = *n_ref2;
    
    return n_deref5;
}